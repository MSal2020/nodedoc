<title>Data Visualisation</title>

<head>
    <!-- loading billboard.js styles from the cdn -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/billboard.js/dist/billboard.min.css" integrity="sha384-1+Kcd5nQisMK3+5HueexbTVzp25By3YKkesoJfHp8HoUiqfpGXaH17mzTVhF6oqL" crossorigin="anonymous">  

    <!--Loading D3.js -->
    <script src="https://d3js.org/d3.v6.min.js" integrity="sha384-ma33ZEb8L5emtidZhYJFZNIFdht2E8f5wHQMKQGom0aIx9rRKm86XXCjGxOISpM9" crossorigin="anonymous"></script>
  
    <!-- Loading billboard.js scripts from the cdn -->
    <script src="https://cdn.jsdelivr.net/npm/billboard.js/dist/billboard.min.js" integrity="sha512-ghMIsvB9YFGsBxYqflN0Qhx+z040Vnd0G327Q2oa9Xn6np4SH9sBQoSfCcFXGMaSp9qFNY4ZLWdrLMDEvjSu4A==" crossorigin="anonymous"></script>

    <!-- Printing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="/printing.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

    <link rel="stylesheet" href="style.css" />

     <style> 
      .navbar-brand{height: 75px; width: 80px;}

    .tbl-header {
      background-color: rgba(255, 255, 255, 0.3);
    }

    .tbl-content {
      height: 300px;
      overflow-x: auto;
      margin-top: 0px;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    th {
      padding: 20px 15px;
      text-align: left;
      font-weight: 500;
      font-size: 12px;
      color: rgb(0, 0, 0);
      text-transform: uppercase;
    }

    td {
      padding: 15px;
      text-align: left;
      vertical-align: middle;
      font-weight: 300;
      font-size: 12px;
      color: rgb(0, 0, 0);
      border-bottom: solid 1px rgba(255, 255, 255, 0.1);
    }

    p 
    {
      margin-top: 10px;
    }
    h1 {
      font-size: 30px;
      color: #00b5ad;
      text-align: center;
      font-weight: 500;
      margin-bottom: 15px;

    }
    h2 {
      font-size: 30px;
      color: #00b5ad;
      text-align: center;
      font-weight: 500;

    }
    h3
    {
      margin-top: 50px;
      font-size: 30px;
      color: #00b5ad;
      text-align: center;
      font-weight: 500;
    }
    h4
    {
      margin-top: 25px;
      font-size: 22px;
      color: #00b5ad;
      text-align: center;
      font-weight: 500;

    }
    h5{
      color: #00b5ad;

    }
    .readingsnumber{float:left; margin-top: 20px;}
    button
{
  appearance: none;
    -webkit-appearance: none;
    color: #95a5a6;
    font-family: "Helvetica", arial, sans-serif;
    font-size: 13px;
    border:1px solid #ecf0f1;
    border-radius: 15px;
    background:#ecf0f1;
    padding:5px;
    display: inline-block !important;
    visibility: visible !important;
}
    /* demo styles */

    @import url(https://fonts.googleapis.com/css?family=Roboto:400,500,300,700);

    /* for custom scrollbar for webkit browser*/

    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
    }

    ::-webkit-scrollbar-thumb {
      -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
    }
    /* Removes the clear button from date inputs */
input[type="date"]::-webkit-clear-button {
    display: none;
}

/* Removes the spin button */
input[type="date"]::-webkit-inner-spin-button { 
    display: none;
}

/* Always display the drop down caret */
input[type="date"]::-webkit-calendar-picker-indicator {
    color: #2c3e50;
}

/* A few custom styles for date inputs */
input[type="date"] {
    appearance: none;
    -webkit-appearance: none;
    color: #95a5a6;
    font-family: "Helvetica", arial, sans-serif;
    font-size: 13px;
    border:1px solid #ecf0f1;
    border-radius: 15px;
    background:#ecf0f1;
    padding:5px;
    display: inline-block !important;
    visibility: visible !important;
}

input[type="date"], focus {
    color: #95a5a6;
    box-shadow: none;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
}

input {    
    appearance: none;
    -webkit-appearance: none;
    color: #95a5a6;
    font-family: "Helvetica", arial, sans-serif;
    font-size: 13px;
    border:1px solid #ecf0f1;
    border-radius: 15px;
    background:#ecf0f1;
    padding:5px;
    display: inline-block !important;
    visibility: visible !important;
  }
        .box {
  
          height: 10px;
          width: 10px;
          margin-bottom: 15px;
          border: 1px solid black;
          clear: both;
          margin: auto;
          display: inline-block
        }

        .red {
          background-color: red;
        }

        .green {
          background-color: green;
        }

        .blue {
          background-color: blue;
        }
        .otherblue{
          background-color: #2596be
        }

        .btn {
  width: 160px;
  font-size: 16px;
  font-weight: 600;
  color: #fff;
  cursor: pointer;
  height: 55px;
  text-align:center;
  border: none;
  background-size: 300% 100%;
  moz-transition: all .4s ease-in-out;
  -o-transition: all .4s ease-in-out;
  -webkit-transition: all .4s ease-in-out;
  transition: all .4s ease-in-out;
}

.btn:hover {
  background-position: 100% 0;
  moz-transition: all .4s ease-in-out;
  -o-transition: all .4s ease-in-out;
  -webkit-transition: all .4s ease-in-out;
  transition: all .4s ease-in-out;
}

.btn:focus {
  outline: none;
}

.btn {
  background-image: linear-gradient(
    to right,
    #0ba360,
    #3cba92,
    #30dd8a,
    #2bb673
  );
  box-shadow: 0 4px 15px 0 rgba(23, 168, 108, 0.75);
}

body,
html
{
  text-align: center; 
  height: 2400px;
  overflow-y: scroll;

}

.warning
{
  font-size: 22px;
  color: red;
  float: left
}

.nowarning
{
  font-size: 22px;
  float: left
}
.idealrange
{
  float: left;
}
.idealrangeheader
{
  float: left; margin-top: 450px;
}
.downloadButtons
{
  display: none;
}
.summarydashboard1
{
  padding-left: 250px;margin:0 auto; width: 1000px; float: left;     
}
.summarydashboardprint
{
  margin:0 auto; width: 1000px; float: left;     
}
.summarydashboard2
{
  text-align: center; width: 800px; padding-right: 100px;
}
.idealrangediv
{
  padding-left: 250px;margin:0 auto; width: 1000px; text-align: left;
}
.heartDashboardclose
{
  display: none;
}
.bloodpressureDashboardclose
{
  display: none;
}
.temperatureDashboardclose
{
  display: none;
}
.readingsTableclose
{
  display: none;
}
.heartDashboardon
{
  display: block;
}
.bloodpressureDashboardon
{
  display: block;
}
.temperatureDashboardon
{
  display: block;
}
.readingsTableon
{
  display: block;
}
.readingsSummary
{
  padding: 50px;margin:0 auto; width: 700px;
}
.summaryreport
{
  display: none;
}
.readingslabeltop
{
  text-align:left; margin-top: 30px;
}
.readingslabelleft
{
  text-align:left;
}
.readingslabelright
{
  float:right
}
.chart
{
  height: 450px; overflow-x: scroll;
}
.topdiv{text-align:center;
  padding-top: 50px;
}
.heartbeatimg
{
  width: 60; height: 60; vertical-align:middle
}
.header
{
  display: inline-block; vertical-align:middle; padding-left: 20px;
}
.dateform
{
  padding: 50px;
}
.graphheader
{
  padding-top: 150px; padding-bottom: 40px;
}
.readingstableheader
{
  margin-top: 100px;
}
.hide
{
  display: none;
}
.tablereading{
  width: 100%; table-layout: fixed;
}
.summarydashboard{
  display: block;
}
  </style>
</head>
<div id="preloader">
  <div class="medilife-load"></div>
</div>

<!-- ***** Header Area Start ***** -->
<header class="header-area">
<!-- Top Header Area -->


<!-- Main Header Area -->
<div class="main-header-area" id="stickyHeader">
    <div class="container h-100">
        <div class="row h-100 align-items-center">
            <div class="col-12 h-100">
                <div class="main-menu h-100">
                    <nav class="navbar h-100 navbar-expand-lg">
                        <!-- Logo Area  -->
                        <a class="navbar-brand" href="/userdashboard"><img src="img/core-img/logo.png" alt="Logo" ></a>

                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#medilifeMenu" aria-controls="medilifeMenu" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>

                        <div class="collapse navbar-collapse" id="medilifeMenu">
                            <!-- Menu Area -->
                            <ul class="navbar-nav ml-auto">
                              <li class="nav-item ">
                                  <a class="nav-link" href="/userdashboard">Home </a>
                              </li>
                              <li class="nav-item active">
                                  <a class="nav-link" href="/userDashboardSelect">Dashboard<span class="sr-only">(current)</span></a>
                              </li>
                              <li class="nav-item">
                                  <a class="nav-link" href="/bot">Chatbot</a>
                              </li>
                              <li class="nav-item">
                                  <a class="nav-link" href="/call">Call</a>
                              </li>
                              <li class="nav-item">
                                  <a class="nav-link" href="/userProfile">Profile</a>
                              </li>
                              <li class="nav-item">
                                  <a class="nav-link" href="about-us.html">About Us</a>
                              </li>
                              <li class="nav-item">
                                  <a class="nav-link" href="/logout">Logout</a>
                              </li>
                          </ul>
                            <!-- Appointment Button -->
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>
</header>
<body>

  <div class="topdiv"> <img src="heartbeat.png" class="heartbeatimg"><h1 class="header">Data Dashboard</h1> </div>

  <form action="/userDashboardSelect" class="dateform"  method="post">
    <label for="date">Select date to show data:</label>
    <input type="date" id="date" name="date">
    <input type="submit">
  </form>
  
  <h2>Summary</h2>
  <h2><%= date1.date %> </h2>

   <div id="date-container" data-date="<%= date1.date %>" hidden></div>



      <br>
        <button class="btn" id="summaryToggle"><i class="fa fa-toggle-down" ></i>Summary</button>
        <button class="btn" id="heartToggle"><i class="fa fa-heartbeat" ></i> Heart</button>
        <button class="btn" id="bloodpressureToggle"><i class="fa fa-heart" ></i> Blood Pressure</button>
        <button class="btn" id="temperatureToggle"><i class="fa fa-thermometer" ></i> Temperature</button>
        <button class="btn" id="readingsTableToggle"><i class="fa fa-database" ></i> All readings</button>
        <button class="btn" id="downloadToggle"><i class="fa fa-download" ></i> Download/Print</button>


        <br><br>
        <div id = "downloadButtons" class="downloadButtons">
          <br>

        <button class="btn" id="generatePDF4"><i class="fa fa-download" ></i>Summary</button>
        <button class="btn" id="generatePDF1"><i class="fa fa-download" ></i>Report</button>
        <button class="btn" id="generatePDF2"><i class="fa fa-download" ></i>Graph</button>
        <button class="btn" id="generatePDF3"><i class="fa fa-download" ></i>Full Report</button>

      </div>

      <div id="summaryDashboard" class="summarydashboard">
        <div class="summarydashboard1" id="summarydashboard1" >
          <div class="summarydashboard2">        
            <h3>Recommendations</h3>
            <% averages.forEach(function(average){%>
              <p><%= average.outp %></p>
        
            <% }); %>
          </div>
          <br>
          <br>
          
          
      <h5 class = "readingsnumber">Total number of readings:  <%= data.length %> </h5>

      <br><br>
          <% 
          if(warningHeartRateHigh.length > 0 || warningHeartRateLow.length> 0 )
          {
            if(warningHeartRateHigh.length > 0 )
            {
              %>
            <h4 class="warning" >Warning: Heart Rate too high for <%= warningHeartRateHigh.length %> readings ( <%= Math.round((warningHeartRateHigh.length/data.length) * 100)  %> %)</h4>
            
              <% }; %>
              
            <%
              if(warningHeartRateLow.length > 0 )
              { 
            %>
          <h4 class="warning" >Warning: Heart Rate too Low for <%= warningHeartRateLow.length %> readings ( <%= Math.round((warningHeartRateLow.length/data.length) * 100)/10 %> %)</h4>
          
            <% } %>
            
          <% }else{ %>
          
            <h4 class="nowarning">No Warnings for heart rate</h4>
          
          <% }; %>
  
          <% 
        if(warningRespiratoryRateHigh.length > 0 || warningRespiratoryRateLow.length > 0)
        {  
            if(warningRespiratoryRateHigh.length > 0 )
            {
          %>
        <h4 class="warning" >Warning: Respiratory Rate too High for <%= warningRespiratoryRateHigh.length %> readings ( <%= Math.round((warningRespiratoryRateHigh.length/data.length) * 1000)/10 %> %)</h4>
        
          <% }; %>
          <%
          if(warningRespiratoryRateLow.length > 0 )
          {
        %>
      <h4 class="warning" >Warning: Respiratory Rate too Low for <%= warningRespiratoryRateLow.length %> readings ( <%= Math.round((warningRespiratoryRateLow.length/data.length) * 1000)/10 %> %)</h4>
 
        <% }; %>
          <% }else{ %>
        
          <h4 class="nowarning">No Warnings for respiratory rate</h4>
        
        <% }; %>




        <% 
        if(warningDiastolicHigh.length > 0 || warningDiastolicLow.length > 0)
        {
          if(warningDiastolicHigh.length > 0 )
              {
            %>
          <h4 class="warning" >Warning: Diastolic Blood Pressure too high for <%= warningDiastolicHigh.length %> readings ( <%= Math.round((warningDiastolicHigh.length/data.length) * 1000)/10 %> %)</h4>
            <% }; %>
            
            <%
            if(warningDiastolicLow.length > 0 )
            {
          %>
        <h4 class="warning" >Warning: Diastolic Blood Pressure too Low for <%= warningDiastolicLow.length %> readings ( <%= Math.round((warningDiastolicLow.length/data.length) * 1000)/10 %> %)</h4>
          <% }; %>
            <% }else{ %>
        
          <h4 class="nowarning">No Warnings for Diastolic Blood Pressure</h4>
        
        <% }; %>

            
        <% 
        if(warningSystolicHigh.length > 0 || warningSystolicLow.length > 0)
        {
          if(warningSystolicHigh.length > 0 )
              {
            %>
          <h4 class="warning" >Warning: Systolic Blood Pressure high for <%= warningSystolicHigh.length %> readings ( <%= Math.round((warningSystolicHigh.length/data.length) * 1000)/10 %> %)</h4>
       
            <% }; %>
            
            <%
            if(warningSystolicLow.length > 0 )
            {
          %>
        <h4 class="warning" >Warning: Systolic Blood Pressure Low for <%= warningSystolicLow.length %> readings ( <%= Math.round((warningSystolicLow.length/data.length) * 1000)/10 %> %)</h4>
   
          <% }; %>
            <% }else{ %>
        
          <h4 class="nowarning">No Warnings for Systolic Blood Pressure</h4>
        
        <% }; %>


      <% 
        if(warningTemperatureHigh.length > 0 || warningTemperatureLow.length > 0)
        {
          if(warningTemperatureHigh.length > 0 )
              {
            %>
          <h4 class="warning" >Warning: Body Temperature too high for <%= warningTemperatureHigh.length %> readings ( <%= Math.round((warningTemperatureHigh.length/data.length) * 1000)/10 %> %)</h4>
   
            <% }; %>
            
            <%
            if(warningTemperatureLow.length > 0 )
            {
          %>
        <h4 class="warning" >Warning: Body Temperature too Low for <%= warningTemperatureLow.length %> readings ( <%= Math.round((warningTemperatureLow.length/data.length) * 1000)/10 %> %)</h4>
   
          <% }; %>
            <% }else{ %>
        
          <h4 class="nowarning">No Warnings for Body Temperature</h4>
        
        <% }; %>
        
        
       

          </div>  
         
          <div class="idealrangediv" >
            <div>
              <p class="idealrangeheader"> *Ideal range for each reading </p>
            </div>
            <div class="idealrange">
              <p > Heart rate: 60 - 100 BPM </p>
            </div>
            <div class="idealrange">
              <p> Respiratory Rate: 13 - 16 BPM </p>
            </div>
            <div class="idealrange">
              <p > Diastolic Blood Pressure: 75 - 85 mmHg </p>
            </div>
            <div class="idealrange">
              <p > Systolic Blood Pressure: 115 - 125 mmHg </p>
            </div>
            <div class="idealrange">
              <p > Body Temperature: 36.1 - 37.2 Â°C </p>
            </div>
          </div>
      </div>


      

          <div>
            <% averages.forEach(function(average){%>
      
          <div id ="heartDashboard" class="heartDashboardclose">
            <div id="readingsSummary" class="readingsSummary" >
              <h3>Heart</h3>
              <h4>Heart Rate (Beats per minute)</h4>
              Heart rate is the number of times your heart beats per minute
              <p class="readingslabeltop">
                Heart Rate Max:
                <span class="readingslabelright">
                  <%= average.heartratemax %> BPM
                </span>
              </p>
              <p class="readingslabelleft">
                Heart Rate Min:
                <span class="readingslabelright">
                  <%= average.heartratemin %> BPM
                </span>
              </p>
              <p class="readingslabelleft">
                Heart Rate Average:
                <span class="readingslabelright">
                  <%= average.heartrateavg %> BPM
                </span>
              </p>
      
              <h4>Heart Rate Variability (miliseconds)</h4>
              Heart rate variability is the difference in time between the beats of your heart, measured in milliseconds (ms).       
              <p class="readingslabeltop">
                Heart Rate Variability Max:
                <span class="readingslabelright">
                  <%= average.heartratevariabilitymax %> ms
                </span>
              </p>
              <p class="readingslabelleft">
                Heart Rate Variability Min:
                <span class="readingslabelright">
                  <%= average.heartratevariabilitymin %> ms
                </span>
              </p>
              <p class="readingslabelleft">
                Heart Rate Variability Average:
                <span class="readingslabelright">
                  <%= average.heartratevariabilityavg %> ms
                </span>
              </p>
      
              <h3>Respiratory Rate (Breaths Per Minute)</h3>
              Respiratory rate is the number of breaths you take per minute
              <p class="readingslabeltop">
                Respiratory Rate Max:
                <span class="readingslabelright">
                  <%= average.respiratoryRatemax %> BPM
                </span>
              </p>
              <p class="readingslabelleft">
                Respiratory Rate Min:
                <span class="readingslabelright">
                  <%= average.respiratoryRatemin %> BPM
                </span>
              </p>
              <p class="readingslabelleft">
                Respiratory Rate Average:
                <span class="readingslabelright">
                  <%= average.respiratoryRateavg %> BPM
                </span>
              </p>
             </div>
              <div id="charting1" class="chart"></div>
            </div>

             
      
              <div id = "bloodpressureDashboard" class="bloodpressureDashboardclose">
                <div id="readingsSummary" class="readingsSummary">

              <h3>Blood Pressure</h3>
              <h4>Diastolic (millimeters of mercury)</h4>
              The pressure in your arteries when your heart beats.
              <p class="readingslabeltop">
                Diastolic Max:
                <span class="readingslabelright">
                  <%= average.diastolicmax %> mmHg
                </span>
              </p>
              <p class="readingslabelleft">
                Diastolic Min:
                <span class="readingslabelright">
                  <%= average.diastolicmin %> mmHg
                </span>
              </p>
              <p class="readingslabelleft">
                Diastolic Average:
                <span class="readingslabelright">
                  <%= average.diastolicavg %> mmHg
                </span>
              </p>
      
              <h4>Systolic (millimeters of mercury)</h4>
              The pressure in your arteries when your heart rests between beats.
              <p class="readingslabeltop">
                Systolic Max:
                <span class="readingslabelright">
                  <%= average.systolicmax %> mmHg
                </span>
              </p>
              <p class="readingslabelleft">
                Systolic Min:
                <span class="readingslabelright">
                  <%= average.systolicmin %> mmHg
                </span>
              </p>
              <p class="readingslabelleft">
                Systolic Average:
                <span class="readingslabelright">
                  <%= average.systolicavg %> mmHg
                </span>
              </p>
              </div>  
              <div id="charting2" class="chart"></div>

              </div>  

              <div id="temperatureDashboard" class="temperatureDashboardclose">

                <div id="readingsSummary" class="readingsSummary">

              <h3>Body Temperature</h3>
              Your body temperature
              <p class="readingslabeltop">
                Temperature Max:
                <span class="readingslabelright">
                  <%= average.temperaturemax %> Â°C
                </span>
              </p>
              <p class="readingslabelleft">
                Temperature Min:
                <span class="readingslabelright">
                  <%= average.temperaturemin %> Â°C
                </span>
              </p>
              <p class="readingslabelleft">
                Temperature Average:
                <span class="readingslabelright">
                  <%= average.temperatureavg %> Â°C
                </span>
              </p>
              </div>  
              <div id="charting3" class="chart"></div>

      </div>
      
      
              <% }); %>
          </div>
      

        <div id="all">      

          <!-- Summary for PDF -->
        <div id ="summaryreport" class="summaryreport">
          <div>
            <% averages.forEach(function(average){%>
      
            <div id="readingsSummary" class="readingsSummary" >
              <h3>Heart</h3>
              <h4>Heart Rate (Beats per minute)</h4>
              Heart rate is the number of times your heart beats per minute
              <p class="readingslabeltop">
                Heart Rate Max:
                <span class="readingslabelright">
                  <%= average.heartratemax %> BPM
                </span>
              </p>
              <p class="readingslabelleft">
                Heart Rate Min:
                <span class="readingslabelright">
                  <%= average.heartratemin %> BPM
                </span>
              </p>
              <p class="readingslabelleft">
                Heart Rate Average:
                <span class="readingslabelright">
                  <%= average.heartrateavg %> BPM
                </span>
              </p>
      
              <h4>Heart Rate Variability (miliseconds)</h4>
              Heart rate variability is the difference in time between the beats of your heart, measured in milliseconds (ms).       
              <p class="readingslabeltop">
                Heart Rate Variability Max:
                <span class="readingslabelright">
                  <%= average.heartratevariabilitymax %> ms
                </span>
              </p>
              <p class="readingslabelleft">
                Heart Rate Variability Min:
                <span class="readingslabelright">
                  <%= average.heartratevariabilitymin %> ms
                </span>
              </p>
              <p class="readingslabelleft">
                Heart Rate Variability Average:
                <span class="readingslabelright">
                  <%= average.heartratevariabilityavg %> ms
                </span>
              </p>
      
              <h3>Respiratory Rate (Breaths Per Minute)</h3>
              Respiratory rate is the number of breaths you take per minute
              <p class="readingslabeltop">
                Respiratory Rate Max:
                <span class="readingslabelright">
                  <%= average.respiratoryRatemax %> BPM
                </span>
              </p>
              <p class="readingslabelleft">
                Respiratory Rate Min:
                <span class="readingslabelright">
                  <%= average.respiratoryRatemin %> BPM
                </span>
              </p>
              <p class="readingslabelleft">
                Respiratory Rate Average:
                <span class="readingslabelright">
                  <%= average.respiratoryRateavg %> BPM
                </span>
              </p>
            </div>

             
      
                <div id="readingsSummary" class="readingsSummary" >

              <h3>Blood Pressure</h3>
              <h4>Diastolic (millimeters of mercury)</h4>
              The pressure in your arteries when your heart beats.
              <p class="readingslabeltop">
                Diastolic Max:
                <span class="readingslabelright">
                  <%= average.diastolicmax %> mmHg
                </span>
              </p>
              <p class="readingslabelleft">
                Diastolic Min:
                <span class="readingslabelright">
                  <%= average.diastolicmin %> mmHg
                </span>
              </p>
              <p class="readingslabelleft">
                Diastolic Average:
                <span class="readingslabelright">
                  <%= average.diastolicavg %> mmHg
                </span>
              </p>
      
              <h4>Systolic (millimeters of mercury)</h4>
              The pressure in your arteries when your heart rests between beats.
              <p class="readingslabeltop">
                Systolic Max:
                <span class="readingslabelright">
                  <%= average.systolicmax %> mmHg
                </span>
              </p>
              <p class="readingslabelleft">
                Systolic Min:
                <span class="readingslabelright">
                  <%= average.systolicmin %> mmHg
                </span>
              </p>
              <p class="readingslabelleft">
                Systolic Average:
                <span class="readingslabelright">
                  <%= average.systolicavg %> mmHg
                </span>
              </p>
              

              </div>  


                <div id="readingsSummary" class="readingsSummary" >

              <h3>Body Temperature</h3>
              Your body temperature
              <p class="readingslabeltop">
                Temperature Max:
                <span class="readingslabelright">
                  <%= average.temperaturemax %> Â°C
                </span>
              </p>
              <p class="readingslabelleft">
                Temperature Min:
                <span class="readingslabelright">
                  <%= average.temperaturemin %> Â°C
                </span>
              </p>
              <p class="readingslabelleft">
                Temperature Average:
                <span class="readingslabelright">
                  <%= average.temperatureavg %> Â°C
                </span>
              </p>
      </div>
      
      
              <% }); %>
          </div>
        </div>


  <!-- So tables can "fit" in pdf -->
  <div id="hide" class="hide">
    <div class="graphheader">
      <h2>Graph</h2>
    </div>
    <h3>Blood Pressure</h3>
    <div id="hiddencharting4" class="chart"></div>
    <div><div class='box red'></div>Heartrate</div>
    <div><div class='box otherblue'></div>Heartrate Variability</div>
    <div><div class='box green'></div>Respiratory Rate</div>
    <h3>Blood Pressure</h3>
    <div id="hiddencharting5" class="chart"></div>
    <div><div class='box red'></div>Diastolic</div>
    <div><div class='box blue'></div>Systolic</div>
    <h3>Blood Pressure</h3>
    <div id="hiddencharting6" class="chart"></div>
    <div><div class='box green'></div>Temperature</div>
  
    </div>
  </div>
</div>

  <div id="readingsTable" class="readingsTableclose">
    <h1 class="readingstableheader">All data readings</h1>
  <div class="tbl-header">
    <table cellpadding="0" cellspacing="0" border="0" class="tablereading">
      <thead>
        <tr>
          <th>Reading No.</th>
          <th>Heart rate (BPM)</th>
          <th>Heart Rate Variability (ms)</th>
          <th>Respiratory Rate (BPM)</th>
          <th>Diastolic Blood Pressure (mmHg)</th>
          <th>Systolic Blood Pressure (mmHg) </th>
          <th>Body Temperature (Â°C)</th>

        </tr>
      </thead>
    </table>
  </div>
  <div class="tbl-content">
    <table cellpadding="0" cellspacing="0" border="0" class="tablereading">
      <tbody>
        <% 
        var number=0 
        var heartrate=["HeartRate"] 
        var heartratevariability=["HeartRateVariability"] 
        var respiratoryRate=["RespiratoryRate"] 
        var diastolic=["Diastolic"] 
        var systolic=["Systolic"] 
        var temperature=["Temperature"] 
        var numberOfReadings=data.length 
        data.forEach(function(reading)
        {
          heartrate.push(reading.heartrate) 
          heartratevariability.push(reading.heartratevariability)
          respiratoryRate.push(reading.respiratoryRate) 
          diastolic.push(reading.diastolic)
          systolic.push(reading.systolic) 
          temperature.push(reading.temperature) 
          number++ 
          
          %>


          <tr>
            <td>
              <%= number %>
            </td>
            <td>
              <%= reading.heartrate %>
            </td>
            <td>
              <%= reading.heartratevariability %>
            </td>
            <td>
              <%= reading.respiratoryRate %>
            </td>
            <td>
              <%= reading.diastolic %>
            </td>
            <td>
              <%= reading.systolic %>
            </td>
            <td>
              <%= reading.temperature %>
            </td>

          </tr>

          <% }); %>
      </tbody>
    </table>
  </div>
  </div>
  <div id="heartratediv" data-heartrate=<%=heartrate %>></div>
  <div id="heartratevariabilitydiv" data-heartratevariability=<%=heartratevariability %>></div>
  <div id="respiratoryRatediv" data-respiratoryrate=<%=respiratoryRate %>></div>
  <div id="diastolicdiv" data-diastolic=<%=diastolic %>></div>
  <div id="systolicdiv" data-systolic=<%=systolic %>></div>
  <div id="temperaturediv" data-temperature=<%=temperature %>></div>
  <div id="numberofreadingsdiv" data-numberofreadings=<%=numberOfReadings %>></div>




</body>


<script>

  var existCondition = setInterval(function () {

    if (document.getElementById('temperaturediv') && document.getElementById('heartratediv') && document.getElementById('systolicdiv') && document.getElementById('diastolicdiv') && document.getElementById('systolicdiv') && document.getElementById('respiratoryRatediv') && document.getElementById('heartratevariabilitydiv')) {
      console.log("Exists!");
      clearInterval(existCondition);

      var heartratedata = document.getElementById('heartratediv').dataset.heartrate
      var heartratecolumn = heartratedata.split(',')

      var heartratevariabilitydata = document.getElementById('heartratevariabilitydiv').dataset.heartratevariability
      var heartratevariabilitycolumn = heartratevariabilitydata.split(',')

      var respiratoryRatedata = document.getElementById('respiratoryRatediv').dataset.respiratoryrate
      var respiratoryRatecolumn = respiratoryRatedata.split(',')

      var diastolicdata = document.getElementById('diastolicdiv').dataset.diastolic
      var diastoliccolumn = diastolicdata.split(',')

      var systolicdata = document.getElementById('systolicdiv').dataset.systolic
      var systoliccolumn = systolicdata.split(',')

      var temperaturedata = document.getElementById('temperaturediv').dataset.temperature
      var temperaturecolumn = temperaturedata.split(',')

      var numberOfReadings = document.getElementById('numberofreadingsdiv').dataset.numberofreadings
      var width = numberOfReadings * 5


      bb.generate({
        bindto: "#charting1",
        data: {
          columns: [
            heartratecolumn,
            heartratevariabilitycolumn,
            respiratoryRatecolumn,

          ],
          types: {
            HeartRate: "spline",
            HeartRateVariability: "spline",
            RespiratoryRate: "spline"
          },
          colors: {
            HeartRate: "red",
            BloodPressure: "blue",
            RespiratoryRate: "green"

          }
        },
        
        axis:
        {
          y: {


            tick: {
              stepSize: 5
            }
          }
        
			
        },
        size:
        {
          width: width
        }


      });

      bb.generate({
        bindto: "#charting2",
        data: {
          columns: [
            diastoliccolumn,
            systoliccolumn,
            ,

          ],
          types: {
            Diastolic: "spline",
            Systolic: "spline",
          },
          colors: {
            Diastolic: "red",
            Systolic: "blue",

          }
        },
        axis:
        {
          y: {
            min: 0,


            tick: {
              stepSize: 5
            }
          }
        },
        size:
        {
          width: width
        }


      });

      bb.generate({
        bindto: "#charting3",
        data: {
          columns: [
            temperaturecolumn,

          ],
          types: {
            Temperature: "area-spline",
          },
          colors: {
            Temperature: "green",

          }
        },
        axis:
        {
          y: {
            min: 35,
            max: 40,
            tick: {
              stepSize: 0.5
            }
          }
        },
        size:
        {
          width: width
        }
        
      });

      //Graphs for PDF
      bb.generate({
        bindto: "#hiddencharting4",
        data: {
          columns: [
            heartratecolumn,
            heartratevariabilitycolumn,
            respiratoryRatecolumn,

          ],
          
          types: {
            HeartRate: "spline",
            HeartRateVariability: "spline",
            RespiratoryRate: "spline"
          },
          colors: {
            HeartRate: "red",
            BloodPressure: "blue",
            RespiratoryRate: "green"

          }
        },
        legend: {
        show: false
        },
        axis:
        {
          y: {


            tick: {
              stepSize: 5
            }
          }
        },
        size:
        {
          width: 800
        }
        


      });

      bb.generate({
        bindto: "#hiddencharting5",
        data: {
          columns: [
            diastoliccolumn,
            systoliccolumn,
            ,

          ],
          types: {
            Diastolic: "spline",
            Systolic: "spline",
          },
          colors: {
            Diastolic: "red",
            Systolic: "blue",

          }
        },
        legend: {
        show: false
        },
        axis:
        {
          y: {
            min: 0,


            tick: {
              stepSize: 5
            }
          }
        },
        size:
        {
          width: 800
        }


      });

      bb.generate({
        bindto: "#hiddencharting6",
        data: {
          columns: [
            temperaturecolumn,

          ],
          types: {
            Temperature: "area-spline",
          },
          colors: {
            Temperature: "green",

          }
        },
        legend: {
        show: false
        },
        axis:
        {
          y: {
            min: 35,
            max: 40,
            tick: {
              stepSize: 0.5
            }
          }
        },
        size:
        {
          width: 800
        }
        
      });
    }

   

    const summaryToggle = document.getElementById('summaryToggle');

    summaryToggle.addEventListener('click', () => {

          const summaryDashboard= document.getElementById('summaryDashboard');

          if (summaryDashboard.style.display === 'none') {
            // ðŸ‘‡ï¸ this SHOWS the form
              var heartDashboard= document.getElementById('heartDashboard');
              var bloodpressureDashboard= document.getElementById('bloodpressureDashboard');
              var readingsTable = document.getElementById('readingsTable');
              var temperatureDashboard= document.getElementById('temperatureDashboard');


              readingsTable.style.display = 'none';
              heartDashboard.style.display = 'none';
              bloodpressureDashboard.style.display = 'none';
              temperatureDashboard.style.display = 'none';

              summaryDashboard.style.display = 'block';
          } else {
            // ðŸ‘‡ï¸ this HIDES the form
            summaryDashboard.style.display = 'none';
            
          }
        });


    const heartToggle = document.getElementById('heartToggle');

  heartToggle.addEventListener('click', () => {

            const heartDashboard= document.getElementById('heartDashboard');

            if (heartDashboard.style.display === 'none') {
              // ðŸ‘‡ï¸ this SHOWS the form
              var bloodpressureDashboard= document.getElementById('bloodpressureDashboard');
              var temperatureDashboard= document.getElementById('temperatureDashboard');
              var readingsTable = document.getElementById('readingsTable');
              var summaryDashboard = document.getElementById('summaryDashboard');

              summaryDashboard.style.display = 'none'
              readingsTable.style.display = 'none';
              bloodpressureDashboard.style.display = 'none';
              temperatureDashboard.style.display = 'none';

              heartDashboard.style.display = 'block';


            } else {
              // ðŸ‘‡ï¸ this HIDES the form
              heartDashboard.style.display = 'none';

            }
          });


          const bloodpressureToggle = document.getElementById('bloodpressureToggle');

          bloodpressureToggle.addEventListener('click', () => {

          const bloodpressureDashboard= document.getElementById('bloodpressureDashboard');

          if (bloodpressureDashboard.style.display === 'none') {
            // ðŸ‘‡ï¸ this SHOWS the form
              var heartDashboard= document.getElementById('heartDashboard');
              var temperatureDashboard= document.getElementById('temperatureDashboard');
              var readingsTable = document.getElementById('readingsTable');
              var summaryDashboard = document.getElementById('summaryDashboard');

              summaryDashboard.style.display = 'none'
              readingsTable.style.display = 'none';
              heartDashboard.style.display = 'none';
              temperatureDashboard.style.display = 'none';

            bloodpressureDashboard.style.display = 'block';
          } else {
            // ðŸ‘‡ï¸ this HIDES the form
            bloodpressureDashboard.style.display = 'none';
                          

          }
        });

        const temperatureToggle = document.getElementById('temperatureToggle');

        temperatureToggle.addEventListener('click', () => {

          const temperatureDashboard= document.getElementById('temperatureDashboard');

          if (temperatureDashboard.style.display === 'none') {
            // ðŸ‘‡ï¸ this SHOWS the form
              var heartDashboard= document.getElementById('heartDashboard');
              var bloodpressureDashboard= document.getElementById('bloodpressureDashboard');
              var readingsTable = document.getElementById('readingsTable');

              summaryDashboard.style.display = 'none'
              readingsTable.style.display = 'none';
              heartDashboard.style.display = 'none';
              bloodpressureDashboard.style.display = 'none';

            temperatureDashboard.style.display = 'block';
          } else {
            // ðŸ‘‡ï¸ this HIDES the form
            temperatureDashboard.style.display = 'none';
            
          }
        });

        const readingsTableToggle = document.getElementById('readingsTableToggle');

        readingsTableToggle.addEventListener('click', () => {

  const readingsTable= document.getElementById('readingsTable');

  if (readingsTable.style.display === 'none') {

    var heartDashboard= document.getElementById('heartDashboard');
    var bloodpressureDashboard= document.getElementById('bloodpressureDashboard');
    var temperatureDashboard= document.getElementById('temperatureDashboard');
    var summaryDashboard = document.getElementById('summaryDashboard');
    summaryDashboard.style.display = 'none'
    temperatureDashboard.style.display = 'none';
    heartDashboard.style.display = 'none';
    bloodpressureDashboard.style.display = 'none';

    // ðŸ‘‡ï¸ this SHOWS the form
    readingsTable.style.display = 'block';
  } else {
    // ðŸ‘‡ï¸ this HIDES the form
    readingsTable.style.display = 'none';

             
  }
});

const downloadToggle = document.getElementById('downloadToggle');

downloadToggle.addEventListener('click', () => {

const downloadButtons= document.getElementById('downloadButtons');
if (downloadButtons.style.display === 'none') {

// ðŸ‘‡ï¸ this SHOWS the form
downloadButtons.style.display = 'block';
} else {
// ðŸ‘‡ï¸ this HIDES the form
downloadButtons.style.display = 'none';

}
});





  }, 100);



  function generatePDF(){
    var date = document.getElementById("date-container").getAttribute("data-date");
    const element = document.getElementById("summaryreport");
    var clonedElement = element.cloneNode(true);
    $(clonedElement).css("display", "block");
    var opt = {
      margin:       1,
      filename:     "Summary Report " + date,
      image:        { type: 'jpeg', quality: 1 },
      html2canvas:  { scale: 2 },
      jsPDF:        { format: 'letter', orientation: 'portrait' }
    };
    html2pdf()
    .set(opt)
    .from(clonedElement)
    .save();
    clonedElement.remove();

}

function generatePDF2(){
    var date = document.getElementById("date-container").getAttribute("data-date");
    const element = document.getElementById("hide");
    var clonedElement = element.cloneNode(true);
    
    // change display of cloned element 
    $(clonedElement).css("display", "block");
    var opt = {
        margin:       1,
        filename:     "Medical Graphs " + date,
        image:        { type: 'jpeg', quality: 1 },
        html2canvas:  { scale: 2 },
        jsPDF:        { format: 'letter', orientation: 'portrait' }
      };
    html2pdf()
    .set(opt)
    .from(clonedElement)
    .save();
    clonedElement.remove();
}

function generatePDF3(){
  var date = document.getElementById("date-container").getAttribute("data-date");
  const element1 = document.getElementById("all");;
  const element2 = document.getElementById("hide");
  const element3 = document.getElementById("summaryreport");

  var clonedElement = element2.cloneNode(true);
  var clonedElement2 = element3.cloneNode(true);
  // change display of cloned element 
  $(clonedElement).css("display", "block");
  var pdfContent = clonedElement2.innerHTML + clonedElement.innerHTML;
  var opt = {
      margin:       1,
      filename:     "Medical Report " + date,
      image:        { type: 'jpeg', quality: 1 },
      html2canvas:  { scale: 2},
      jsPDF:        { format: 'letter', orientation: 'portrait' }
    };
  html2pdf()
  .set(opt)
  .from(pdfContent)
  .save();
  clonedElement.remove();
  clonedElement2.remove();
  }

  function generatePDF4(){
  var date = document.getElementById("date-container").getAttribute("data-date");
  const element1 = document.getElementById("summaryDashboard");
  const element2 = document.getElementById("summarydashboard1");
  var clonedElement = element1.cloneNode(true);
  var clonedElement2 = element2.cloneNode(true);
  clonedElement2.className="summarydashboardprint"
  // change display of cloned element 
  if(clonedElement.style.display = 'none')
  {
    $(clonedElement).css("display", "block");
    $(clonedElement2).css("display", "block");

  }
 

  var opt = {
      margin:       1,
      filename:     "Medical Report " + date,
      image:        { type: 'jpeg', quality: 1 },
      html2canvas:  { dpi: 96, letterRendering: true },
      jsPDF:        { format: 'letter', orientation: 'portrait' }
    };
  html2pdf()
  .set(opt)
  .from(clonedElement2)
  .save();
  clonedElement2.remove();
  }
  
document.addEventListener("DOMContentLoaded", function () {
         // do things after the DOM loads partially
  var pdf1 = document.getElementById('generatePDF1')
  
  pdf1.addEventListener('click', () => {

    console.log("hey")
    generatePDF()
  })
  var pdf2 = document.getElementById('generatePDF2')
  pdf2.addEventListener('click', () => {

    generatePDF2()
  })
  var pdf3 = document.getElementById('generatePDF3')
  pdf3.addEventListener('click', () => {

    generatePDF3()
  })

  var pdf4 = document.getElementById('generatePDF4')
  pdf4.addEventListener('click', () => {

    generatePDF4()
  })
           });

</script>


  <!-- jQuery (Necessary for All JavaScript Plugins) -->
  <script src="js/jquery/jquery-2.2.4.min.js"></script>
  <!-- Popper js -->
  <script src="js/popper.min.js"></script>
  <!-- Bootstrap js -->
  <script src="js/bootstrap.min.js"></script>
  <!-- Plugins js -->
  <script src="js/plugins.js"></script>
  <!-- Active js -->
  <script src="js/active.js"></script>
</html>
